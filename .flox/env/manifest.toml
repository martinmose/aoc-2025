version = 1

[install]
python3.pkg-path = "python3"
python3.version = ">=3.13"

[hook]
on-activate = """
  export PYTHON_DIR="$FLOX_ENV_CACHE/venv"
  if [ ! -d "$PYTHON_DIR" ]; then
    echo "Creating virtual environment..."
    python -m venv "$PYTHON_DIR"
    "$PYTHON_DIR/bin/pip" install -e ".[dev]" --quiet
  fi
"""

[profile]
common = """
  source "$FLOX_ENV_CACHE/venv/bin/activate"

  alias lint='ruff check . && mypy .'
  alias fmt='ruff format .'
  alias test='pytest'
  alias check='ruff check . && ruff format --check . && mypy . && pytest'
"""

[options]
systems = ["aarch64-darwin", "aarch64-linux", "x86_64-darwin", "x86_64-linux"]
